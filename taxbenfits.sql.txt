create table Address_Type (Address_Type_ID Integer NOT NULL PRIMARY KEY, DESCRIPTION VARCHAR(100) NOT NULL);
CREATE TABLE USER_TYPE(USER_TYPE_ID INTEGER NOT NULL PRIMARY KEY, Description VARCHAR(100) NOT NULL);

CREATE TABLE ADDRESS(ADDRESS_ID INTEGER NOT NULL PRIMARY KEY,ADDRESS_TYPE_ID INTEGER NOT NULL  REFERENCES ADDRESS_TYPE (ADDRESS_TYPE_ID));
ALTER TABLE ADDRESS 
ADD ZIP INTEGER NOT NULL; 

CREATE TABLE USER1(USER_ID INTEGER NOT NULL PRIMARY KEY, FIRST_NAME VARCHAR(100) NOT NULL,MIDDLE_NAME VARCHAR(100),LAST_NAME VARCHAR(100) NOT NULL,
BILLING_ADDRESS_ID INTEGER NOT NULL REFERENCES ADDRESS(ADDRESS_ID),MAILING_ADDRESS_ID INTEGER NOT NULL REFERENCES ADDRESS(ADDRESS_ID),
PHYSICAL_ADDRESS_ID INTEGER NOT NULL REFERENCES ADDRESS(ADDRESS_ID));
 
 CREATE TABLE AGENT(AGENT_ID INTEGER NOT NULL PRIMARY KEY,USER_ID INTEGER NOT NULL,EIN_NUMBER INTEGER NOT NULL ,
 CONSTRAINT EIN UNIQUE(EIN_NUMBER));
ALTER TABLE AGENT ADD OFFICE_ADDRESS_ID INTEGER NOT NULL REFERENCES ADDRESS(ADDRESS_ID);

CREATE TABLE ORGANIZATION(ORGANIZATION_ID INTEGER NOT NULL PRIMARY KEY,USER_ID INTEGER NOT NULL,EIN_NUMBER INTEGER NOT NULL,
ORAGANIZATION_ADDRESS_ID INTEGER NOT NULL REFERENCES ADDRESS(ADDRESS_ID),
CONSTRAINT EIN_ORGANIZATION UNIQUE(EIN_NUMBER));

CREATE TABLE REGISTRATION(REGISTRATION_ID INTEGER NOT NULL PRIMARY KEY,
USER_NAME VARCHAR(100) NOT NULL,
EMAIL_ADDRESS VARCHAR(100) NOT NULL,
PHONE_NUMBER INTEGER NOT NULL,
USER_TYPE_ID INTEGER NOT NULL,
PASSWORD VARCHAR(100) NOT NULL,
USER_ID INTEGER NOT NULL REFERENCES USER1(USER_ID));

CREATE TABLE TAX_PAYER(TAX_PAYER_ID INTEGER NOT NULL PRIMARY KEY,USER_ID INTEGER NOT NULL,SSN INTEGER NOT NULL); 

CREATE TABLE BANK_ACCOUNT(BANK_ACCOUNT_ID INTEGER NOT NULL PRIMARY KEY, TAX_PAYER_ID INTEGER NOT NULL REFERENCES TAX_PAYER(TAX_PAYER_ID),
BANK_NAME VARCHAR(100) NOT NULL,BRANCH_NAME VARCHAR(100) NOT NULL,ACCOUNT_NUMBER VARCHAR(100) NOT NULL,BANK_ADDRESS_ID INTEGER NOT NULL,
ROUTING_NUMBER INTEGER NOT NULL);

CREATE TABLE TAX_PAYER_DEPENDENT(TAX_PAYER_DEPENDENT_ID INTEGER NOT NULL PRIMARY KEY,TAX_PAYER_ID INTEGER NOT NULL REFERENCES TAX_PAYER(TAX_PAYER_ID),
YEAR INTEGER NOT NULL,MARITAL_STATUS VARCHAR(10) NOT NULL,NUMBER_OF_DEPENDENTS INTEGER NOT NULL,DEPENDENT VARCHAR(10) NOT NULL,
DEPENDENT_TAX_PAYER_ID INTEGER NOT NULL REFERENCES TAX_PAYER(TAX_PAYER_ID));

CREATE TABLE FEDRAL_TAX_TRANSACTION(FEDRAL_TAX_TRANSACTION_ID INTEGER NOT NULL PRIMARY KEY,TAX_PAYER_ID INTEGER NOT NULL REFERENCES TAX_PAYER(TAX_PAYER_ID),
YEAR INTEGER NOT NULL,FILTER_TYPE_ID INTEGER NOT NULL REFERENCES USER_TYPE(USER_TYPE_ID),FILTER_USER_ID INTEGER NOT NULL REFERENCES AGENT(AGENT_ID),
N_TH_YEAR_OF_TAX_FILLING INTEGER NOT NULL,ANNUAL_INCOME INTEGER NOT NULL,FEDRAL_TAX INTEGER NOT NULL,FEDRAL_TAX_PAID INTEGER NOT NULL,
FEDRAL_DIFFERENCE INTEGER NOT NULL,FEDRAL_BANK_ACCOUNT_ID INTEGER NOT NULL);

CREATE TABLE STATE_TAX_TRANSACTION(STATE_TAX_TRANSACTION_ID INTEGER NOT NULL PRIMARY KEY,
TAX_PAYER_ID INTEGER NOT NULL REFERENCES TAX_PAYER(TAX_PAYER_ID),
YEAR INTEGER NOT NULL,FILTER_TYPE_ID INTEGER NOT NULL REFERENCES USER_TYPE(USER_TYPE_ID),
FILTER_USER_ID INTEGER NOT NULL REFERENCES AGENT(AGENT_ID),
N_TH_YEAR_OF_TAX_FILLING INTEGER NOT NULL,
STATE_NAME VARCHAR(100) NOT NULL,STATE_CODE VARCHAR(100) NOT NULL,ANNUAL_INCOME INTEGER NOT NULL,STATE_TAX INTEGER NOT NULL,
STATE_TAX_PAID INTEGER NOT NULL,
STATE_DIFFERENCE INTEGER NOT NULL,STATE_BANK_ACCOUNT_ID INTEGER NOT NULL);
